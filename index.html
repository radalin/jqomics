<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="jquery2.min.js"></script>
    <style>
    .hidden {
      display: none;
    }
    </style>
    <script>
    // TODO: I need button controls...
    // TODO: Show the full page function...
    // TODO: Div size should change according to the frame...
    $.fn.comics = function(pages) {
      this.pages = pages, this.currentPageIndex = 0, this.currentFrameIndex = 0, this.defaultTransitionSpeed = 1000;
      this.init = function() {
        var self = this;
        $.each(self.pages, function(i, el) {
          self.pages[i]["index"] = i;
          self.append(
            $("<img>")
              .attr("src", el.source)
              .addClass("page hidden page-" + i)
              .css({
                "position": "absolute",
              })
          );
        });
        this.jumpToPage(0);
      };
      this.nextPage = function() {
        if (this.currentPageIndex >= this.pages.length - 1) {
          // TODO: show an alert or something...
          console.log("last page");
          return;
        }
        this.currentPage = this.pages[++this.currentPageIndex];
        this.currentFrameIndex = 0;
        this.__changePage(this.currentPage)
      };
      this.previousPage = function(fromFrame) {
        if (this.currentPageIndex <= 0) {
          // TODO: Show an alert or something...
          console.log("first page");
          return;
        }
        this.currentPage = this.pages[--this.currentPageIndex];
        if (fromFrame) {
          this.currentFrameIndex = this.currentPage.frames.length - 1;
        } else {
          this.currentFrameIndex = 0;
        }
        this.__changePage(this.currentPage)
      };
      this.jumpToPage = function(pageIndex) {
        this.jumpToPageAndFrame(pageIndex, 0);
      };
      this.jumpToPageAndFrame = function(pageIndex, frameIndex) {
        this.currentPageIndex = pageIndex;
        this.currentFrameIndex = frameIndex;
        this.currentPage = this.pages[this.currentPageIndex];
        this.currentFrame = this.currentPage.frames[this.currentFrameIndex];
        this.__changeFrame(this.currentFrame);
        this.__changePage(this.currentPage);
      };
      this.nextFrame = function() {
        if (this.currentFrameIndex + 1 >= this.currentPage.frames.length) {
          this.nextPage();
        } else {
          this.currentFrame = this.currentPage.frames[++this.currentFrameIndex];
          this.__changeFrame(this.currentFrame);
        }
      };
      this.previousFrame = function() {
        if (this.currentFrameIndex - 1 < 0) {
          this.previousPage(true);
        } else {
          this.currentFrame = this.currentPage.frames[--this.currentFrameIndex];
          this.__changeFrame(this.currentFrame);
        }
      };
      this.__changePage = function(page) {
        this.find(".page-current").fadeOut(this.defaultTransitionSpeed, function() {
          $(this).addClass("hidden").removeClass("page-current");
        });
        this.find(".page-" + page.index).fadeIn(this.defaultTransitionSpeed, function() {
          $(this).addClass("page-current").removeClass("hidden");
        })
      };
      this.__changeFrame = function(newFrame) {
        this.find(".page-" + this.currentPageIndex).animate({"left": newFrame.x, "top": newFrame.y});
      };
      this.init();
      return this;
    }
    $(document).ready(function() {
      comic = $("#comic").comics(
        [{
          source: "_MG_4722.jpg",
          frames: [
            {x: -100, y: -50},
            {x: -150, y: -50},
            {x: -150, y: -150}
          ]
        },
        {
          source: "_MG_1861.jpg",
          frames: [
            {x: -200, y: -50},
            {x: -350, y: -50}
          ]
          
        }]
      );
    })
    
    $('#book').animate({
   opacity: 0.25,
   left: '+=50',
   height: 'toggle'
   }, 5000, function() {
   // Animation complete.
   });
    </script>
  </head>
    <body>
        <div id="comic" style="width: 300px; height: 300px;">
        </div>
    </body>
</html>